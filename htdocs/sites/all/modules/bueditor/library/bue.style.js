/*
 * Copyright by ufku.com
 */
(function(b,a){BUE.parseStyle=function(g){var e={},d=g.toString().split(";");for(var h,f=0,c=d.length;f<c;f++){if(d[f]&&(h=d[f].split(":"))&&h.length>1){e[a.trim(h.shift())]=a.trim(h.join(":"))}}return e};BUE.textStyle=function(c){var g,e=[];if(typeof c=="object"){for(g in c){var f=c[g],d=typeof f;if((d=="string"||d=="number")&&f!=""){e.push(g+": "+f+";")}}}return e.join(" ")};BUE.getStyle=function(d,e){var d=typeof d=="string"?BUE.parseHtml(d):d;if(!d||!d.attributes||typeof d.attributes.style!="string"){return undefined}var c=BUE.parseStyle(d.attributes.style);return typeof e=="string"?c[e]:c};BUE.setStyle=function(f,e){var g=f,d=typeof f=="string",c;d&&(f=BUE.parseHtml(f));if(!f||typeof e!="object"){return g}if(c=BUE.getStyle(f)){f.attributes.style=BUE.textStyle(a.extend(c,e))||null}else{f.attributes=a.extend(f.attributes||{},{style:BUE.textStyle(e)||null})}return d?BUE.objHtml(f):f};b.styleSelection=function(e,d,j){var f=e,c=d;if(typeof e=="string"){(f={})[e]=d;c=j}var h=this,g=h.getSelection(),i=BUE.parseHtml(g)||c&&{tag:c,html:g,attributes:{}};return i?h.insertObj(BUE.setStyle(i,f)):h.focus()};b.toggleStyle=function(f,e,c){var d=this;if(BUE.getStyle(d.getSelection(),f)==e){e=null}return d.styleSelection(f,e,c)}})(BUE.instance.prototype,jQuery);